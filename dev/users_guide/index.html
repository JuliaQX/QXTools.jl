<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User&#39;s Guide · QXTools.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link rel="canonical" href="https://JuliaQX.github.io/QXTools.jl/users_guide/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.svg" alt="QXTools.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">QXTools.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../getting_started/">Getting Started</a></li><li class="is-active"><a class="tocitem" href>User&#39;s Guide</a><ul class="internal"><li><a class="tocitem" href="#Parallel-Processing"><span>Parallel Processing</span></a></li><li><a class="tocitem" href="#Parameter-File"><span>Parameter File</span></a></li><li><a class="tocitem" href="#DSL-Specification"><span>DSL Specification</span></a></li><li><a class="tocitem" href="#Data-File"><span>Data File</span></a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../basics/">Introduction</a></li><li><a class="tocitem" href="../circuits/">Circuits with QXZoo and YaoQX</a></li><li><a class="tocitem" href="../features/">Miscellaneous Features</a></li><li><a class="tocitem" href="../distributed/">Running Distributed Simulations</a></li></ul></li><li><a class="tocitem" href="../license/">LICENSE</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>User&#39;s Guide</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>User&#39;s Guide</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaQX/QXTools.jl/blob/master/docs/src/users_guide.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="User&#39;s-Guide"><a class="docs-heading-anchor" href="#User&#39;s-Guide">User&#39;s Guide</a><a id="User&#39;s-Guide-1"></a><a class="docs-heading-anchor-permalink" href="#User&#39;s-Guide" title="Permalink"></a></h1><p>QXTools generates output files which provide a description of the computations and data required to perform a simulation. There are three output files:</p><ul><li>Parameter file: This YAML file provides information on the sampling method to use for the simulation</li><li>DSL file: The DSL file contains instructions describing the tensor operations involved in</li></ul><p>performing the simulation. Uses <code>.qx</code> suffix</p><ul><li>Data file: The data file contains the numerical values of the initial tensors of the tensor network</li></ul><h2 id="Parallel-Processing"><a class="docs-heading-anchor" href="#Parallel-Processing">Parallel Processing</a><a id="Parallel-Processing-1"></a><a class="docs-heading-anchor-permalink" href="#Parallel-Processing" title="Permalink"></a></h2><p>There are two levels of parallelism that are used to distribute computations over different processing elements. The highest level of parallism divides the set of output bitstrings among the available processing elements. The lower level of parallelism breaks each contraction into a sum of smaller contractions by slicing bonds of the tensor network. Slicing also reduces the total memory requirements and make it possible to perform contractions that would otherwise be intractable on a given system. However for each additional edge that is sliced, the network must be contracted for all possible values of the edge, leading to exponential growth in the number of contractions with the number of edges that are sliced. It is thus very important to choose the right edges to slice. This is a non trivial optimisation problem, but there exist many methods to which can find reasonable sets of edges to slice. In QXTools, the edges to slice are found when finding the contraciton plan which is handled by the <a href="https://github.com/juliaqx/QXGraphDecompositions.jl">QXGraphDecompositions</a> package. Once the edges to select have been identified these appear as <code>view</code> commands in the DSL file, explained further below.</p><h2 id="Parameter-File"><a class="docs-heading-anchor" href="#Parameter-File">Parameter File</a><a id="Parameter-File-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-File" title="Permalink"></a></h2><p>The parameter file parameters for the sampling method used to select output bitstrings. The following example shows how an explicit list of 3 bitstrings can be provided.</p><pre><code class="nohighlight hljs">output:
  method: List
  params:
    num_samples: 3
    bitstrings:
      - &quot;010&quot;
      - &quot;101&quot;
      - &quot;111&quot;</code></pre><h2 id="DSL-Specification"><a class="docs-heading-anchor" href="#DSL-Specification">DSL Specification</a><a id="DSL-Specification-1"></a><a class="docs-heading-anchor-permalink" href="#DSL-Specification" title="Permalink"></a></h2><p>A Domain Specific Language (DSL) has been defined when enables better separation of concerns between components. This DSL describes a contraction over a tensor network to calculate observables of interest in the form of a sequence of instructions which act on individual tensors. This makes it possible to separate the development of the high performance distributed tensor network computation code from that of the higher level contraction planning, circuit and and network manipulation code. The &quot;.qx&quot; suffix is used to identify these DSL files. We will first show a simple example of such a DSL file and then descibe each instruction in detail.</p><h3 id="Example-DSL-file"><a class="docs-heading-anchor" href="#Example-DSL-file">Example DSL file</a><a id="Example-DSL-file-1"></a><a class="docs-heading-anchor-permalink" href="#Example-DSL-file" title="Permalink"></a></h3><p>An example of the DSL generated for the contraction of a two qubit GHZ circuit looks like.</p><pre><code class="nohighlight hljs"># version: 0.4.0
# Determination of contraction plan:
#   Method used: &quot;flow cutter&quot;
#   Treewidth: 2
#   Time allocated: 2
#   Seed used: -1
#   Returned metadata:
#     1: &quot;c min degree heuristic&quot;
#     2: &quot;c status 3 1627390755700&quot;
#     3: &quot;c min shortcut heuristic&quot;
#     4: &quot;c run with 0.0/0.1/0.2 min balance and node_min_expansion in endless loop with varying seed&quot;
#   Hypergraph used: true
#   Hyperedge contraction method: &quot;Netcon where possible, min fill heuristic otherwise.&quot;
# Slicing:
#   Method used: &quot;greedy treewidth deletion&quot;
#   Edges sliced: 2
#   Score fucntion used: direct_treewidth
#   Treewidths after slicing consecutive edges:
#     - 1
#     - 0
#
load t5 data_1 2
view t5_s t5 v2 1 2
load t1 data_2 2,2
view t1_s t1 v1 1 2
load t4 data_1 2
ncon I2 1 t1_s 1,2 t4 2
ncon t8 1,2 t5_s 1 I2 2
load t3 data_4 2
view t3_s t3 v1 1 2
ncon t9 1,2 t8 1,2 t3_s 2
output t6 1 2
view t6_s t6 v1 1 2
ncon t10 1,2 t9 1,2 t6_s 2
load t2 data_3 2,2,2
view t2_s t2 v1 3 2
view t2_s_s t2_s v2 2 2
output t7 2 2
ncon I1 2,3 t2_s_s 1,2,3 t7 1
ncon t11 0 t10 1,2 I1 1,2
save output t11</code></pre><h3 id="DSL-Format-and-Instructions"><a class="docs-heading-anchor" href="#DSL-Format-and-Instructions">DSL Format and Instructions</a><a id="DSL-Format-and-Instructions-1"></a><a class="docs-heading-anchor-permalink" href="#DSL-Format-and-Instructions" title="Permalink"></a></h3><p>The DSL file is a regular ASCII text file with one instruction per line. Lines beginning with <code>#</code> are comments which are ignored (except for the first line which contains version information). The first line has a version string which specifies the format version. Comments following the first line contain metadata about the methods used to determine the contraction plan used and which edges to slice. We now go through each of the instructions in order of appearence.</p><h4 id="Load"><a class="docs-heading-anchor" href="#Load">Load</a><a id="Load-1"></a><a class="docs-heading-anchor-permalink" href="#Load" title="Permalink"></a></h4><p>Load instructions define a new tensor symbol using data from the input file. Here the first argument is the name of the new symbol, the second argument is the key to find the data at and the third argument is a comma separated list of dimensions of the tensor.</p><h4 id="View"><a class="docs-heading-anchor" href="#View">View</a><a id="View-1"></a><a class="docs-heading-anchor-permalink" href="#View" title="Permalink"></a></h4><p>The view instruction creates a new tensor symbol by taking a view of an existing tensor. The first argument is the new symbol name, the second is the symbol of the tensor to take the view of, the third argument is the symbol used to identify the index, the fourth identifies the rank of the index of the tensor to slice and the final argument is the dimension of the bond. For example the instruction</p><pre><code class="nohighlight hljs">view t5_s t5 v2 1 2</code></pre><p>will create a new tensor labeled <code>t5_s</code> by taking a view on the tensor labeled <code>t5</code> by setting the value of the first index to the value labeled by symbol <code>v2</code>. If <code>t5_s</code>, <code>t5</code> and <code>v2</code> were variables this would look something like</p><pre><code class="nohighlight hljs">t5_s = t5[v2]</code></pre><h4 id="Contraction"><a class="docs-heading-anchor" href="#Contraction">Contraction</a><a id="Contraction-1"></a><a class="docs-heading-anchor-permalink" href="#Contraction" title="Permalink"></a></h4><p>The <code>ncon</code> instruction specifies a pairwise contraction of tensors. An example contraction command is as follows</p><pre><code class="nohighlight hljs">ncon I2 1 t1_s 1,2 t4 2</code></pre><p>Which indicates that the <code>t1_s</code> tensor should be contracted with the <code>t4</code> tensor to get the <code>I2</code> tensor. The contraction should be performed over the second rank of the <code>t1_s</code> tensor and first rank of the <code>t4</code> tensor. Einstein summation notation is used for for specifying which indices to contract over. This convention uses repeated indices on the right hand side to indicate that those indices should be contracted over. In the above, the <code>2</code> index appears twice on the right hand side which indicates that this index should be contracted over. For the case where one of the tensors is a scalar, a <code>0</code> is used as a placeholder. For example if <code>t1</code> is a scalar tensor and <code>t2</code> is a matrix, the multiplication of the matrix by the scalar can be expressed as</p><pre><code class="nohighlight hljs">ncon t3 1,2 t1 0 t2 1,2</code></pre><p>Batched contractions (sometimes called hyper-contractions) are also supported. This is where the same index is repeated on the right hand side and also appears on the left hand side.</p><h4 id="Output"><a class="docs-heading-anchor" href="#Output">Output</a><a id="Output-1"></a><a class="docs-heading-anchor-permalink" href="#Output" title="Permalink"></a></h4><p>The output instruction marks tensors as corresponding to circuit outputs and provides their dimension. For example, the instruction</p><pre><code class="nohighlight hljs">output t6 1 2</code></pre><p>specifies that the tensor <code>t6</code> will refer to the first output and that it has dimension 2.</p><h4 id="Save"><a class="docs-heading-anchor" href="#Save">Save</a><a id="Save-1"></a><a class="docs-heading-anchor-permalink" href="#Save" title="Permalink"></a></h4><p>The save instruction indicates that the given tensor is an output from the contraction and provides a label for this. The value of this tensor will then be used in a reduction operation and/or written to the output file.</p><h2 id="Data-File"><a class="docs-heading-anchor" href="#Data-File">Data File</a><a id="Data-File-1"></a><a class="docs-heading-anchor-permalink" href="#Data-File" title="Permalink"></a></h2><p>The data file is a <a href="https://github.com/JuliaIO/JLD2.jl">JLD2</a> file and contains the numerical values of the initial tensors. Each tensor is stored as a multi-dimensional array with a data label that is referenced in <code>load</code> commands of the DSL file.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../getting_started/">« Getting Started</a><a class="docs-footer-nextpage" href="../basics/">Introduction »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Sunday 12 December 2021 22:08">Sunday 12 December 2021</span>. Using Julia version 1.7.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
